<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /><title>Profile Summary</title></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><title>Function details for getDepressionsComboOriginal</title><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">getDepressionsComboOriginal (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/><i>Generated 25-Apr-2019 14:50:53 using performance time.</i><br/>function in file C:\Users\SamuelANoel\Documents\SequentialDepressionFilling\CedarCreek\Methods\Options\Combos\Combo1\getDepressionsComboOriginal.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Name</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Type</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file10.html">ComboOriginal</a></td><td class="td-linebottomrt">script</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Line Number</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Code</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Total Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Freed Memory</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Peak Memory</td><td class="td-linebottomrt" style="background-color:#F0F0F0">% Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line75">75</a></td><td class="td-linebottomrt"><pre>recursiveMarkPits(p);</pre></td><td class="td-linebottomrt">155206</td><td class="td-linebottomrt">2.099 s</td><td class="td-linebottomrt">168.00 Kb</td><td class="td-linebottomrt">148.00 Kb</td><td class="td-linebottomrt">12.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">41.8%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=42 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line101">101</a></td><td class="td-linebottomrt"><pre>parfor p = 1 : length(pitId)</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.986 s</td><td class="td-linebottomrt">65060.00 Kb</td><td class="td-linebottomrt">63556.00 Kb</td><td class="td-linebottomrt">43216.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">19.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=20 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line71">71</a></td><td class="td-linebottomrt"><pre>if (isnan(pits(p)))</pre></td><td class="td-linebottomrt">688716</td><td class="td-linebottomrt">0.461 s</td><td class="td-linebottomrt">12.00 Kb</td><td class="td-linebottomrt">8.00 Kb</td><td class="td-linebottomrt">8.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">9.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=9 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line72">72</a></td><td class="td-linebottomrt"><pre>continue</pre></td><td class="td-linebottomrt">422723</td><td class="td-linebottomrt">0.282 s</td><td class="td-linebottomrt">12.00 Kb</td><td class="td-linebottomrt">16.00 Kb</td><td class="td-linebottomrt">12.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">5.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=6 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line74">74</a></td><td class="td-linebottomrt"><pre>if (pits(p) == 0)</pre></td><td class="td-linebottomrt">265993</td><td class="td-linebottomrt">0.178 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">3.5%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=4 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">1.015 s</td><td class="td-linebottomrt">10844.00 Kb</td><td class="td-linebottomrt">5472.00 Kb</td><td class="td-linebottomrt">43216.00 Kb</td><td class="td-linebottomrt">20.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=20 height=10></td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Totals</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">5.021 s</td><td class="td-linebottomrt" style="background-color:#F0F0F0">76096.00 Kb</td><td class="td-linebottomrt" style="background-color:#F0F0F0">69200.00 Kb</td><td class="td-linebottomrt" style="background-color:#F0F0F0">43216.00 Kb</td><td class="td-linebottomrt" style="background-color:#F0F0F0">100%</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file334.html">...onsComboOriginal&gt;recursiveMarkPits</a></td><td class="td-linebottomrt">nested function</td><td class="td-linebottomrt">155206</td><td class="td-linebottomrt">1.670 s</td><td class="td-linebottomrt">144.00 Kb</td><td class="td-linebottomrt">96.00 Kb</td><td class="td-linebottomrt">12.00 Kb</td><td class="td-linebottomrt">33.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=33 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file41.html">parallel_function</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.985 s</td><td class="td-linebottomrt">65060.00 Kb</td><td class="td-linebottomrt">63556.00 Kb</td><td class="td-linebottomrt">43216.00 Kb</td><td class="td-linebottomrt">19.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=20 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file8.html">strcat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.005 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file278.html">num2str</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.001 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file333.html">nansum</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.000 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file281.html">parfor_endpoint_check</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0.000 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file280.html">parfor_sliced_fcnhdl_check</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.000 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">2.359 s</td><td class="td-linebottomrt">10892.00 Kb</td><td class="td-linebottomrt">5548.00 Kb</td><td class="td-linebottomrt">43216.00 Kb</td><td class="td-linebottomrt">47.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2018a\toolbox\matlab\codetools\private\one-pixel.gif" width=47 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">5.021 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">76096.00 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">69200.00 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">43216.00 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line107">107</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'k' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line121">121</a></td><td class="td-linebottomrt"><span class="mono">The entire array or structure 'indexes' is a broadcast variable. This might result in unnecessary communication overhead.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line124">124</a></td><td class="td-linebottomrt"><span class="mono">The entire array or structure 'flow_direction' is a broadcast variable. This might result in unnecessary communication overhead.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line128">128</a></td><td class="td-linebottomrt"><span class="mono">The entire array or structure 'pits' is a broadcast variable. This might result in unnecessary communication overhead.</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory<br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Total lines in function</td><td class="td-linebottomrt">178</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">142</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">36</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">35</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">1</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">97.22 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table id="FunctionListingTable"><tr style="height:20px;"><th><pre><span style="color:#FF0000;">time</span> </pre></th><th><pre><span style="color:#0000FF;">Calls</span> </pre></th><th><pre><span style="color:#20AF20;">mem</span> </pre></th><th class="leftAligned" COLSPAN=2><pre><span> line</span></pre></th></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   1</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">function[pits, pitId, pitCell, areaCellCount, spilloverElevation, vca, volume, filledVolume, cellOverflowInto] = getDepressionsComboOriginal(dem, flow_direction, cellsize)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   2</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Generate the matrix identifying depressions in the DEM as well as their</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   3</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% parameters. </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   4</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   5</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Inputs: </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   6</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   7</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% dem - elevation matrix</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   8</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   9</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% flow_direction - flow direction matrix</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  10</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  11</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% flow_direction_parents - matrix of flow direction parents</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  12</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  13</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% cellsize - side length of each cell, i.e., DEM resolution (meters).</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  14</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  15</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Outputs (each of the following is an array having a length of the number of</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  16</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% depressions found in the flow direction matrix operation. Each row</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  17</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% corresponds to a different depression. Each of these parameters are </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  18</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% needed in order to provide consistent mergers of depressions in the </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  19</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% filling process):</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  20</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  21</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% pitId - The ID number assigned to the depression.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  22</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% pitCell - The row and column of the pit cell found in the flow direction </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  23</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% matrix.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  24</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  25</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% areaCellCount - Total contributing area expressed as the integer count of</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  26</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% cells. Multiply by the DEM cell area to get area in square meters.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  27</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% spilloverElevation - The elevation which sets the maximum water level of </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  28</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% the depression after which it will overflow.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  29</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  30</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% vca - Volume to Contributing Area (VCA) ratios for each depression, also </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  31</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% equivalent to the depth of rainfall excess the depression can retain. </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  32</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% This value is used to sort the depressions so that they may be filled in </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  33</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% order. Computed using volume in cubic meters and area in square meters. </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  34</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  35</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% volume - The retention volumes for each depression (m^3).</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  36</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  37</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% filledVolume - The volume (m^3) filled in previous iterations.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  38</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  39</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% cellOverflowInto - The row and column of the cell in an adjacent</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  40</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% depression where water will begin to overflow into.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  41</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  42</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Preallocate variables</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  43</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">disp('Creating Pit Database'); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre> (Calls: 1, Time: 5.021 s, 76096.00 Kb, 69200.00 Kb, 43216.00 Kb)</span><br/></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  44</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.002 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  45</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pits = nan(size(dem)); % matrix identifying pits </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.006 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  46</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pit_count = sum(<a href="file333.html">nansum</a>(flow_direction == -1)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  47</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pitId = int32(1 : pit_count); % id of each pit </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  48</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pitCell = int32(find(flow_direction == -1)); % pit bottom cell index </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  49</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">areaCellCount = zeros(pit_count, 1); % integer number of cells </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  50</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">spilloverElevation = zeros(pit_count, 1); % meters </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  51</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">vca = zeros(pit_count, 1); % volume to contributing area ratio (hours) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  52</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">volume = zeros(pit_count, 1); % (cubic meters) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  53</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">filledVolume = zeros(pit_count, 1); % (cubic meters) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  54</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">cellOverflowInto = int32(zeros(pit_count, 1)); %cell index of overflow location </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  55</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  56</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Pits must first be identified in the pit matrix in order to return the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  57</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% correct pit ID that each pit flows into (if not, many of these pits will</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  58</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% flow into yet unidentified pits that have ID 0).</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  59</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('Creating pit ID matrix...') </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  60</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('Done'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  61</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('\n'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.006 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  62</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf(<a href="file8.html">strcat</a>('Number of depressions: ',<a href="file278.html">num2str</a>(length(pitCell)))) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  63</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('\n'); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  64</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  65</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Fill out the pit ID image/matrix</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.003 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  66</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pits(~isnan(dem)) = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  67</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pits(pitCell) = pitId; % Mark the pit bottom in the pits image. This is  </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  68</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% used in recursiveMarkPits to tell what ID to mark each cell during tail</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  69</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% recursion.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  70</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">for p = 1 : numel(pits) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.461 </span></pre></td><td><pre><span style="color: #0000FF"> 688716 </span></pre></td><td><pre><span style="color: #20AF20">          12k/8k/8k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  71</span><a name="Line71"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFE2E2; padding:1px;">    if (isnan(pits(p))) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.282 </span></pre></td><td><pre><span style="color: #0000FF"> 422723 </span></pre></td><td><pre><span style="color: #20AF20">        12k/16k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  72</span><a name="Line72"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFF0F0; padding:1px;">        continue </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">        12k/16k/12k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  73</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.178 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">        12k/16k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  74</span><a name="Line74"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if (pits(p) == 0) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  2.099 </span></pre></td><td><pre><span style="color: #0000FF"> 155206 </span></pre></td><td><pre><span style="color: #20AF20">      168k/148k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  75</span><a name="Line75"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">        <a href="file334.html">recursiveMarkPits</a>(p); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.110 </span></pre></td><td><pre><span style="color: #0000FF"> 155206 </span></pre></td><td><pre><span style="color: #20AF20">      168k/148k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  76</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.176 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">         12k/8k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  77</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    curPitId = pits(p); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.176 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  78</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if ~isnan(curPitId) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.176 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">        12k/52k/12k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  79</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        areaCellCount(curPitId) = areaCellCount(curPitId) + 1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.175 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">          0b/16k/0b </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  80</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.177 </span></pre></td><td><pre><span style="color: #0000FF"> 265993 </span></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  81</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  82</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  83</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">function childId = recursiveMarkPits(i)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  84</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    child = flow_direction(i);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  85</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    if pits(child) == 0 % downstream is yet unidentified in the pits matrix</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  86</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        childId = recursiveMarkPits(child);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  87</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        pits(i) = childId;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  88</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    else % downstream already set</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  89</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        childId = pits(child);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  90</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        pits(i) = childId;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  91</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  92</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    return</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  93</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  94</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  95</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  96</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('\n'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  97</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fprintf('Gathering data for each pit...'); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  98</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">         16k/0b/16k </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  99</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">[numrows, numcols] = size(pits); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.003 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">     5.27m/0b/5.27m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 100</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">indexes = reshape(1: numel(flow_direction), size(flow_direction)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.986 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 101</span><a name="Line101"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFC6C6; padding:1px;">parfor p = 1 : length(pitId) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 102</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    spilloverElevation(p) = realmax('double');</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 103</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    indicesToCheck = int32(zeros(areaCellCount(p), 2));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 104</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    [r, c] = ind2sub(size(dem), pitCell(p));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 105</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    indicesToCheck(1, :) = [r, c];</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 106</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    j = 2; % index for appending new indicesToCheck</span><br/></pre></td></tr><tr><a name="Line107"></a><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 107</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    k = 1;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 108</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    for i = 1 : areaCellCount(p)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 109</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        r = indicesToCheck(i, 1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 110</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        c = indicesToCheck(i, 2);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 111</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % First, loop over 3x3 neighborhood to find indicesToCheck</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 112</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        for x = -1 : 1 % loop through neighboring cells</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 113</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            for y = -1 : 1</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 114</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if x == 0 &amp;&amp; y ==0</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 115</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    continue; % skip center cell of 3x3 neighborhood</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 116</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 117</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if r+y &gt; numrows || r+y &lt; 1 || c+x &gt; numcols || c+x &lt; 1</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 118</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    continue; % skip neighbors outside the dem range</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 119</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 120</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><a name="Line121"></a><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 121</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                neighbor = indexes(r+y, c+x);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 122</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                curCell = indexes(r, c);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 123</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % First, check for neighbors to check next.</span><br/></pre></td></tr><tr><a name="Line124"></a><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 124</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if flow_direction(neighbor) == curCell% using the sparse here should be both fast on lookup and low on memory usage</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 125</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    indicesToCheck(j, :) = [r+y, c+x];</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 126</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    j = j + 1;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 127</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><a name="Line128"></a><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 128</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if pits(neighbor) ~= pits(curCell)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 129</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    if isnan(dem(neighbor))</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 130</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                        continue;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 131</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 132</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    elev = max(dem([neighbor, curCell])); % lines are always oriented starting at lowest linear index</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 133</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    if (elev &lt; spilloverElevation(p))</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 134</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                        spilloverElevation(p) = elev;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 135</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                        cellOverflowInto(p) = neighbor;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 136</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 137</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 138</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 139</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 140</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 141</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 142</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    % Compute Volume</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 143</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    filledVolume(p) = 0;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 144</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    indicesToCheck = zeros(areaCellCount(p), 2);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 145</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    [r, c] = ind2sub(size(flow_direction), pitCell(p));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 146</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    indicesToCheck(1, :) = [r, c];</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 147</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    j = 2;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 148</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    i = 1;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 149</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    while i &lt; j</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 150</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        r = indicesToCheck(i, 1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 151</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        c = indicesToCheck(i, 2);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 152</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        i = i + 1;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 153</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        volume(p) = volume(p) + (spilloverElevation(p) - dem(r,c))*cellsize*cellsize;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 154</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        for x = -1 : 1 % loop through neighboring cells</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 155</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            for y = -1 : 1</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 156</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if x == 0 &amp;&amp; y ==0</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 157</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    continue; % skip center cell of 3x3 neighborhood</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 158</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 159</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 160</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if r+y &gt; numrows || r+y &lt; 1 || c+x &gt; numcols || c+x &lt; 1</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 161</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    continue; % skip neighbors outside the dem range</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 162</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 163</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 164</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                curCell = indexes(r, c);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 165</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                if flow_direction(r+y, c+x) == curCell &amp;&amp; dem(r+y, c+x) &lt;= spilloverElevation(p)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 166</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    indicesToCheck(j, :) = [r+y, c+x];</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 167</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    j = j + 1;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 168</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 169</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 170</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 171</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 172</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 173</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    vca(p) = volume(p)/((cellsize^2).*areaCellCount(p));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 174</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    if vca(p) &lt; 0</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 175</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        vca(p) = Inf;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 176</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #20AF20">  63.5m/62.1m/42.2m </span></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 177</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #20AF20">        0b/5.27m/0b </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 178</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr></table></body></html>